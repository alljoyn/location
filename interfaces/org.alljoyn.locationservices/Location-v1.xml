<?xml version="1.0"?>
<node xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="https://www.alljoyn.org/schemas/introspect.xsd">
  <interface name="org.alljoyn.locationservices.Location.Location">
    <description language="en">
      This interface contains methods for applications to access the location service data
    </description> 
  <property name="Version" type="q" access="read">
    <description language="en">Interface Version</description>
    <annotation name="org.freedesktop.DBus.Property.EmitsChangedSignal" value="true"/>
  </property>
  <annotation name="org.alljoyn.Bus.Secure" value="true" />

    <struct name="LocationEntity">
     <description language="en" >
       The representation of a device in location services.
     </description>
      <field name="entityDescriptor" type="s"/>
      <field name="entityMac" type="ay"/>
      <field name="locationData" type="[LocationData]"/>
    </struct>
    
    <struct name="LocationData">
      <description language="en" >
       The representation of location data. 
       The field origin defines the reference point (e.g. wgs84)
     </description>
      <field name="origin" type="s"/>
      <field name="x" type="i"/>
      <field name="y" type="i"/>
      <field name="z" type="i"/>
      <field name="horizontalAccuracy" type="i"/>
      <field name="horizontalAccuracyMultiplier" type="i"/>
      <field name="verticalAccuracy" type="i"/>
      <field name="verticalAccuracyMultiplier" type="i"/>
    </struct>
    
    <struct name="LocationFilter">
     <description language="en" >
       A filter to match entities the application is interested in
     </description>
      <field name="descriptorParser" type="s"/>
      <field name="macParser" type="s"/>
    </struct>

    <method name="LocationSubscribe">
     <description language="en" >
       Request presence tracking of entities that match the filter parsers.  
       Signals tagged with the returned tracker value are relevant; 
       other signals should be ignored.
     </description>
      <arg name="filter" type="[LocationFilter]" direction="in"/>
      <arg name="locationTracker" type="o" direction="out"/>
    </method>

    <!-- Do we need to add a LocationUnsubscribe method? -->

   
    <method name="QueryLocation">
      <arg name="entity" type="[Entity]" direction="in"/>
      <arg name="location" type="[wgs84Data]" direction="out"/>
      <arg name="horizontalAccuracy" type="i" direction="out"/>
      <arg name="horizontalAccuracyMultiplier" type="i" direction="out"/>
      <arg name="verticalAccuracy" type="i" direction="out"/>
      <arg name="verticalAccuracyMultiplier" type="i" direction="out"/>
      <!--- power is an enum of HIGH, LOW or UNSPECIFIED -->
      <arg name="powerPreference" type="u" direction="in"/>
      <!--  Accuracy is an enum of HIGH, LOW or UNPSECIFIED -->
      <arg name="accuracyPreference" type="u" diretion="in"/>
    </method>
    <method name="QueryAllLocation">
      <arg name="location" type="[wgs84Data]" direction="in"/>
      <arg name="horizontalDelta" type="i" direction="in"/>
      <arg name="horizontalDeltaMultiplier" type="i" direction="in"/>
      <arg name="verticalDelta" type="i" direction="in"/>
      <arg name="verticalDeltaMultiplier" type="i" direction="in"/>
      <arg name="nearbyEntities" type="a[Entity]" direction="out"/>
    </method>
    <signal name="location">
      <arg name="Entity" type="[Entity]" direction="out"/>
      <arg name="location" type="[wgs84Data]" direction="out"/>
      <arg name="horizontalAccuracy" type="i" direction="out"/>
      <arg name="horizonalAccuracyMultiplier" type="i" direction="out"/>
      <arg name="verticalAccuracy" type="i" direction="out"/>
      <arg name="verticalAccuracyMultiplier" type="i" direction="out"/>
    </signal>
  </interface>
</node>
